<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warhammer 40k PvP Clash Turnierbaum</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .bracket {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .round {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .match {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 5px 0;
            background-color: white;
            width: 200px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Warhammer 40k PvP Clash Turnierbaum</h1>
    <div id="tournament-bracket"></div>

    <script>
        const SHEET_ID = "1myC3N5XIXElxu8qIJ6dm8QfBnYs9FTNYyYnV8c1MZ6s"; // Deine Google Sheet ID
        const SHEET_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;

        async function loadBracket() {
            try {
                const response = await fetch(SHEET_URL);
                const csv = await response.text();
                const data = csv.split('\n').map(row => row.split(',').map(cell => cell.replace(/"/g, '').trim()));

                const teams = {
                    round1: data.slice(0, 16).map(row => row[9]), // Spalte 10
                    round2: data.slice(0, 8).map(row => row[10]), // Spalte 11
                    round3: data.slice(0, 4).map(row => row[11]), // Spalte 12
                    round4: data.slice(0, 2).map(row => row[12]), // Spalte 13
                    final: data.slice(0, 1).map(row => row[13]), // Spalte 14
                    winner: data.slice(0, 1).map(row => row[14]), // Spalte 15
                    loserRound1: data.slice(0, 8).map(row => row[18]), // Spalte 19
                    loserRound2: data.slice(0, 4).map(row => row[17]), // Spalte 18
                    loserRound3: data.slice(0, 2).map(row => row[16]), // Spalte 17
                    loserFinal: data.slice(0, 1).map(row => row[15]) // Spalte 16
                };

                function createMatch(team1, team2) {
                    return `<div class="match">${team1} vs ${team2}</div>`;
                }

                function createRound(roundTeams) {
                    let roundHTML = '<div class="round">';
                    for (let i = 0; i < roundTeams.length; i += 2) {
                        roundHTML += createMatch(roundTeams[i], roundTeams[i + 1] || "TBD");
                    }
                    roundHTML += '</div>';
                    return roundHTML;
                }

                document.getElementById('tournament-bracket').innerHTML = `
                    <div class="bracket">
                        ${createRound(teams.round1)}
                        ${createRound(teams.round2)}
                        ${createRound(teams.round3)}
                        ${createRound(teams.round4)}
                        ${createRound(teams.final)}
                        ${createRound(teams.winner)}
                    </div>
                    <div class="bracket">
                        ${createRound(teams.loserRound1)}
                        ${createRound(teams.loserRound2)}
                        ${createRound(teams.loserRound3)}
                        ${createRound(teams.loserFinal)}
                    </div>
                `;
            } catch (error) {
                console.error("Fehler beim Laden der Daten:", error);
            }
        }

        loadBracket();
    </script>
</body>
</html>
